---
# Temp trigger of the job
- project:
    check:
      jobs:
        - sf-ci-remote-gerrit

- job:
    name: sf-ci
    parent: new-base
    description: The sf ci tests
    post-run: playbooks/get-logs.yaml
    timeout: 7200
    required-projects:
      - software-factory/sf-ci
      - software-factory/sfinfo
    nodeset:
      nodes:
        - name: install-server
          label: dib-centos-7
    vars:
      sf_version: master
      logclassify_logserver_dir: logs/
      logclassify_debug: true

- job:
    name: sf-ci-remote-gerrit
    description: A job to test the remote config-location options
    parents: sf-ci
    run: playbooks/remote-gerrit.yaml
    nodeset:
      nodes:
        - name: zuul-host
          label: dib-centos-7
        - name: gerrit-host
          label: dib-centos-7

- job:
    name: sf-ci-functional-minimal
    description: The sf functional tests of the minimal architecture
    parent: sf-ci
    run: playbooks/functional.yaml
    vars:
      sf_arch: minimal

- job:
    name: sf-ci-functional-allinone
    description: The sf functional tests of the allinone architecture
    parent: sf-ci
    run: playbooks/functional.yaml
    vars:
      sf_arch: allinone

- job:
    name: sf-ci-upgrade-minimal
    description: The sf upgrade tests of the minimal architecture
    parent: sf-ci
    run: playbooks/upgrade.yaml
    vars:
      sf_arch: minimal
      sf_version: 3.0

- job:
    name: sf-ci-upgrade-allinone
    description: The sf upgrade tests of the allinone architecture
    parent: sf-ci
    run: playbooks/upgrade.yaml
    vars:
      sf_arch: allinone
      sf_version: 3.0

- job:
    name: sf-deploy-stable
    description: The sf deploy lastest stable
    parent: sf-ci
    run: playbooks/stable.yaml
    vars:
      sf_arch: allinone
      sf_version: 3.0
      centos_cr: false

- job:
    name: sf-deploy-stable-cr
    description: The sf deploy lastest stable with CentOS CR
    parent: sf-ci
    run: playbooks/stable.yaml
    vars:
      sf_arch: allinone
      sf_version: 3.0
      centos_cr: true
