# On slave node a Jenkins user is already created with login shell
# To avoid further with sf-jenkins setup task issue reset it to /sbin/nologin
- name: "Fix jenkins user shell"
  command: "sed -i '/^jenkins/ s#:[^:]*$#:/sbin/nologin#' /etc/passwd"
  become: yes

- name: "Create artifact directory"
  file:
    path: "{{ artifacts }}"
    state: directory

# /etc/nodepool is created during the slave creation
# remove this directory to allow symlink creation for
# nodepool3 setup playbook
- name: Remove /etc/nodepool directory
  file:
    path: /etc/nodepool
    state: absent
