---
- name: Ensure no zuul and nodepool working directories exist
  file:
    path: '{{ item }}'
    state: absent
  loop:
    - /var/lib/zuul
    - /etc/nodepool
  become: yes

- name: Set artifacts
  set_fact:
    artifacts: "{{ ansible_env.HOME }}/artifacts"

- name: Ensure artifacts directory exists
  file:
    path: "{{ artifacts }}"
    state: directory
    owner: "{{ sf_user }}"
  become: yes

- name: Install CentOS CR repository
  command: yum-config-manager --enable cr
  become: yes
  when: centos_cr is defined and centos_cr

- name: Install provisioner requirements
  package:
    name: python-beautifulsoup4
  become: yes
