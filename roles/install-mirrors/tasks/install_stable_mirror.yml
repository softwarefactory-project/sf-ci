# move this in main.yml
- name: Check for zuul-built.repo
  stat:
    path: /etc/yum.repos.d/zuul-built.repo
  register: zuul_built_repo

- name: Check for local-built.repo
  stat:
    path: /etc/yum.repos.d/local-built.repo
  register: local_built_repo

  #TODO: replace by synchronize or copy
- name: Save zuul-built.repo
  command: mv /etc/yum.repos.d/zuul-built.repo /root/
  when: zuul_built_repo.stat.exists
  become: yes

  #TODO: replace by synchronize or copy
- name: Save local-built.repo
  command: mv /etc/yum.repos.d/local-built.repo /root
  when: local_built_repo.stat.exists
  become: yes
# until here

- name: Install stable repo
  yum:
    name: https://softwarefactory-project.io/repos/sf-release-{{ sf_version }}.rpm
    validate_certs: no
    state: present
  become: yes

- name: Install CentOS CR repository
  command: yum-config-manager --enable cr
  become: yes
  when: centos_cr is defined and centos_cr
